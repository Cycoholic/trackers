<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-118283643-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){{dataLayer.push(arguments);}}
      gtag('js', new Date());

      gtag('config', 'UA-118283643-1');
    </script>

    <title>Trackrace.tk</title>
    <meta name="description" content="Live location tracking for ultra distance cycling.">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#000000">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
</head>
<body style="margin: 0;">
  <div id="head-contain" style="
      position: fixed;
      height: 300px;
      width: 100%;
      overflow: hidden;
      z-index: 2;
      ">
    <div id="head-back" style="
        position: absolute;
        width: 100%; height: 400px;
        background: #000000;
        background-image: url(/static/logos/PANO_20170116_114550.jpg);
        background-size: cover;
        background-position: center;
        ">
    </div>
    <div id="head" style="
        position: absolute;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(0, 0, 0, 0.2); ">
      <h1 style="color: white;">Trackrace.tk</h1>
    </div>
  </div>
  <div style="height: 300px;"> </div>

  <div style="margin: 24px; width: 100%;">
    <div style="margin: auto; max-width: 800px;">
{events}
    </div>
  </div>

    <script>
;(function() {{
    var throttle = function(type, name, obj) {{
        var obj = obj || window;
        var running = false;
        var func = function() {{
            if (running) {{ return; }}
            running = true;
            requestAnimationFrame(function() {{
                obj.dispatchEvent(new CustomEvent(name));
                running = false;
            }});
        }};
        obj.addEventListener(type, func);
    }};
    throttle ("scroll", "optimizedScroll");
}})();

var head_contain = document.getElementById('head-contain');
var head_back = document.getElementById('head-back');
var head = document.getElementById('head');

window.addEventListener("optimizedScroll", function(){{
  console.log(window.pageYOffset);
  change = 200 - Math.min(window.pageYOffset, 200);
  console.log(200);
  head_contain.style.height = (100 + change) + 'px';
  head_back.style.height = (200 + change) + 'px';
  head_back.style.top = (change / 2 - 100) + 'px';
  head.style.background = 'rgba(0.2, 0.2, 0.2, ' + ((200 - change)  / 200 + 0.1)  + ')';

}})

    </script>
</body>
</html>